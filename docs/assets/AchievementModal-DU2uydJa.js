import{u as U,i as V,o as n,c as f,w as i,j as r,F as v,k as g,l,a as d,t as o,d as D,n as F,m as k,h as I}from"./index-DxUjHE30.js";import{C as M}from"./index-BXTIZ6PB.js";import{C as j}from"./index-BcZct203.js";import{_ as z}from"./BaseModal-CTNVJOyi.js";import{u as E}from"./useAchievements-DOEuUTSP.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"achievement-group-title"},S={class:"achievement-icon"},T={class:"achievement-title"},$={key:0,class:"achievement-new-badge"},q={class:"achievement-desc"},H={key:0,class:"achievement-progress"},J={__name:"AchievementModal",props:{open:Boolean},emits:["update:open"],setup(y,{emit:C}){const p=y,w=C,m=I({get:()=>p.open,set:e=>w("update:open",e)}),{unlockedList:a,achievementsByCategory:B,newlyUnlockedIds:_,clearNewlyUnlocked:h}=E(),{records:b}=U();function x(e){const s=!a.value.includes(e.id);return e.hidden&&s?"？？？":e.title}function L(e){const s=!a.value.includes(e.id);return e.hidden&&s?"解锁后可见～":e.desc}function u(e){if(!e.getProgress)return null;const s=e.getProgress(b.value);return s&&typeof s.current=="number"&&typeof s.target=="number"?s:null}function N(){h()}return V(()=>p.open,e=>{e||h()}),(e,s)=>{const P=j,A=M;return n(),f(z,{open:m.value,"onUpdate:open":s[0]||(s[0]=c=>m.value=c),title:"成就","inner-class":"achievement-modal-inner",onClose:N},{default:i(()=>[(n(!0),r(v,null,g(l(B),c=>(n(),r("div",{key:c.category,class:"achievement-group"},[d("h3",R,o(c.label),1),D(A,{inset:""},{default:i(()=>[(n(!0),r(v,null,g(c.list,t=>(n(),f(P,{key:t.id,class:F([{locked:!l(a).includes(t.id),"is-new":l(_).includes(t.id)},"achievement-item"])},{icon:i(()=>[d("span",S,o(t.icon),1)]),title:i(()=>[d("span",T,o(x(t)),1),l(_).includes(t.id)?(n(),r("span",$,"新")):k("",!0)]),label:i(()=>[d("span",q,o(L(t)),1),!l(a).includes(t.id)&&t.getProgress&&u(t)?(n(),r("span",H,o(u(t).current)+" / "+o(u(t).target),1)):k("",!0)]),_:2},1032,["class"]))),128))]),_:2},1024)]))),128))]),_:1},8,["open"])}}},Z=G(J,[["__scopeId","data-v-19624e37"]]);export{Z as default};
