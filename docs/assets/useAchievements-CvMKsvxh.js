import{r as k,al as A,h as p,am as s,an as f,ao as n,H as l}from"./index-BraOb1rX.js";function P(e){const t=l().subtract(6,"day").format("YYYY-MM-DD"),r=e.filter(a=>a.dateKey>=t);return new Set(r.map(a=>a.type||"other")).size>=4}function g(e){const t=f(e);return t.length?Math.max(...t.map(({recs:r})=>r.length)):0}function E(e){return e.some(t=>l(t.timestamp).hour()<6)}function S(e){return e.some(t=>l(t.timestamp).hour()>=23)}function w(e){if(!e.length)return 0;const t=e.slice().sort((r,a)=>r.timestamp-a.timestamp)[0];return l().diff(l(t.timestamp),"day")}const d=[{id:"first",category:"start",title:"ç¬¬ä¸€æ¬¡",desc:"æ‰“äº†ç¬¬ä¸€æ¬¡æˆ‘ï½ž",icon:"ðŸŽ‰",hidden:!1,check:e=>e.length>=1,getProgress:e=>({current:e.length,target:1})},{id:"streak3",category:"start",title:"è¿žç»­ 3 å¤©",desc:"ä»Žä»Šå¤©èµ·è¿žç»­ 3 å¤©éƒ½æœ‰è®°å½•ï½ž",icon:"ðŸŒ±",hidden:!1,check:e=>s(e)>=3,getProgress:e=>({current:s(e),target:3})},{id:"all4",category:"start",title:"ä¸€æ—¥å…¨èƒ½",desc:"åŒä¸€å¤©æ‰“è¿‡ 4 ç§ç±»åž‹ï½ž",icon:"ðŸŒŸ",hidden:!1,check:e=>f(e).some(({recs:t})=>new Set(t.map(r=>r.type||"other")).size>=4),getProgress:e=>f(e).some(({recs:t})=>new Set(t.map(r=>r.type||"other")).size>=4)?{current:1,target:1}:{current:0,target:1}},{id:"streak7",category:"streak",title:"è¿žç»­ 7 å¤©",desc:"ä»Žä»Šå¤©èµ·è¿žç»­ 7 å¤©éƒ½æœ‰è®°å½•ï½ž",icon:"ðŸ”¥",hidden:!1,check:e=>s(e)>=7,getProgress:e=>({current:s(e),target:7})},{id:"streak14",category:"streak",title:"è¿žç»­ 14 å¤©",desc:"ä»Žä»Šå¤©èµ·è¿žç»­ 14 å¤©éƒ½æœ‰è®°å½•ï½ž",icon:"â­",hidden:!1,check:e=>s(e)>=14,getProgress:e=>({current:s(e),target:14})},{id:"streak30",category:"streak",title:"è¿žç»­ 30 å¤©",desc:"ä»Žä»Šå¤©èµ·è¿žç»­ 30 å¤©éƒ½æœ‰è®°å½•ï½ž",icon:"ðŸ†",hidden:!1,check:e=>s(e)>=30,getProgress:e=>({current:s(e),target:30})},{id:"toilet30",category:"type",title:"åŽ•æ‰€ä¹‹å…‰",desc:"å¦‚åŽ•æ‰“æˆ‘æ»¡ 30 æ¬¡ï½ž",icon:"ðŸš½",hidden:!1,check:e=>n(e,"toilet").length>=30,getProgress:e=>({current:n(e,"toilet").length,target:30})},{id:"meal30",category:"type",title:"å¹²é¥­äºº",desc:"é¥­å¦æ‰“æˆ‘æ»¡ 30 æ¬¡ï½ž",icon:"ðŸš",hidden:!1,check:e=>n(e,"meal").length>=30,getProgress:e=>({current:n(e,"meal").length,target:30})},{id:"fitness30",category:"type",title:"å¥èº«å°èƒ½æ‰‹",desc:"å¥èº«æ‰“æˆ‘æ»¡ 30 æ¬¡ï½ž",icon:"ðŸ’ª",hidden:!1,check:e=>n(e,"fitness").length>=30,getProgress:e=>({current:n(e,"fitness").length,target:30})},{id:"other30",category:"type",title:"å…¶ä»–è¾¾äºº",desc:"å…¶ä»–ç±»åž‹æ‰“æˆ‘æ»¡ 30 æ¬¡ï½ž",icon:"âœ¨",hidden:!1,check:e=>n(e,"other").length>=30,getProgress:e=>({current:n(e,"other").length,target:30})},{id:"count100",category:"milestone",title:"ç¬¬ 100 æ¬¡",desc:"ç´¯è®¡æ‰“æˆ‘æ»¡ 100 æ¬¡ï½ž",icon:"ðŸ’¯",hidden:!1,check:e=>e.length>=100,getProgress:e=>({current:e.length,target:100})},{id:"count500",category:"milestone",title:"ç¬¬ 500 æ¬¡",desc:"ç´¯è®¡æ‰“æˆ‘æ»¡ 500 æ¬¡ï½ž",icon:"ðŸŽŠ",hidden:!1,check:e=>e.length>=500,getProgress:e=>({current:e.length,target:500})},{id:"days100",category:"milestone",title:"åšæŒ 100 å¤©",desc:"ç”¨æ‰“æˆ‘å°æœ¬æœ¬æ»¡ 100 å¤©ï½ž",icon:"ðŸ“…",hidden:!1,check:e=>w(e)>=100,getProgress:e=>({current:w(e),target:100})},{id:"all4week",category:"special",title:"å…¨èƒ½å‘¨",desc:"ä¸€å‘¨å†… 4 ç§ç±»åž‹éƒ½æ‰“è¿‡ï½ž",icon:"ðŸŒˆ",hidden:!1,check:e=>P(e),getProgress:e=>P(e)?{current:1,target:1}:{current:0,target:1}},{id:"day5",category:"special",title:"å•æ—¥äº”è¿ž",desc:"åŒä¸€å¤©æ‰“æˆ‘æ»¡ 5 æ¬¡ï½ž",icon:"ðŸ“Œ",hidden:!1,check:e=>g(e)>=5,getProgress:e=>({current:g(e),target:5})},{id:"day10",category:"special",title:"å•æ—¥åè¿ž",desc:"åŒä¸€å¤©æ‰“æˆ‘æ»¡ 10 æ¬¡ï½ž",icon:"ðŸ”Ÿ",hidden:!1,check:e=>g(e)>=10,getProgress:e=>({current:g(e),target:10})},{id:"earlyBird",category:"special",title:"æ—©èµ·é¸Ÿ",desc:"æŸå¤© 6 ç‚¹å‰æ‰“è¿‡æˆ‘ï½ž",icon:"ðŸŒ…",hidden:!0,check:e=>E(e),getProgress:e=>E(e)?{current:1,target:1}:{current:0,target:1}},{id:"nightOwl",category:"special",title:"å¤œçŒ«å­",desc:"æŸå¤© 23 ç‚¹åŽæ‰“è¿‡æˆ‘ï½ž",icon:"ðŸ¦‰",hidden:!0,check:e=>S(e),getProgress:e=>S(e)?{current:1,target:1}:{current:0,target:1}}],B={start:"èµ·æ­¥",streak:"è¿žç»­",type:"ç±»åž‹",milestone:"é‡Œç¨‹ç¢‘",special:"å½©è›‹"};function h(){try{const e=localStorage.getItem(A);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}}function D(e){localStorage.setItem(A,JSON.stringify(e))}let u=null,y=null;function O(){u||(u=k(h())),y||(y=k([]));const e=u,t=y;function r(m){const c=h(),i=[];return d.forEach(o=>{c.includes(o.id)||o.check(m)&&(i.push(o),c.push(o.id))}),i.length&&(D(c),e.value=c,t.value=i.map(o=>o.id)),i}function a(){t.value=[]}const v=p(()=>e.value),I=p(()=>["start","streak","type","milestone","special"].map(c=>({category:c,label:B[c],list:d.filter(i=>i.category===c)})).filter(c=>c.list.length>0));return{unlockedList:v,achievements:d,achievementsByCategory:I,newlyUnlockedIds:t,checkAll:r,clearNewlyUnlocked:a,loadUnlocked:h}}export{O as u};
