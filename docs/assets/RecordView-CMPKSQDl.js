import{ac as M,o as l,i as n,a,t as u,af as N,d as c,w as p,u as _,F as m,j as y,c as j,h as k,ag as A,B as E,r as w,aj as F,n as z,ai as L,e as P,aq as U,aw as q,ax as G}from"./index-4AsoHqFf.js";import{E as I}from"./index-Ce1uXC_3.js";import{a as S,T as $}from"./index-Co1jpRl9.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-id-BWuaSVke.js";const J={class:"tab-panel active record-page"},O={class:"record-header"},Q={class:"record-header-inner"},W={key:0,class:"record-summary"},X={class:"record-filters"},Y={class:"record-filter-row"},Z={class:"record-filter-row"},ee={class:"record-list-wrap"},te={class:"record-date-title"},ae={class:"record-date-cards"},se={class:"record-card-type"},oe={class:"record-card-time"},re={__name:"RecordView",setup(le){const g=A("openActionsMenu",()=>{}),{records:C,deleteRecord:T,applyFilter:B}=M();function x(r){const e=q();G({title:"删掉这条？",message:"真要删掉这条呀？",showCancelButton:!0,confirmButtonText:"好哒",cancelButtonText:"算了",...e?{confirmButtonColor:e}:{}}).then(()=>T(r)).catch(()=>{})}const v=w("all"),d=w("all"),K=[{type:"toilet",label:"如厕"},{type:"meal",label:"饭否"},{type:"fitness",label:"健身"},{type:"other",label:"其他"}],V=[{value:"all",label:"全部"},{value:"today",label:"今天"},{value:"week",label:"本周"},{value:"month",label:"本月"}],f=k(()=>{const r=B(C.value,v.value);return d.value==="all"?r:r.filter(e=>(e.type||"other")===d.value)}),h=k(()=>{const r=f.value.slice().sort((o,s)=>s.timestamp-o.timestamp),e=new Map;for(const o of r){const s=o.dateKey||"";e.has(s)||e.set(s,{dateKey:s,recs:[]}),e.get(s).recs.push(o)}return Array.from(e.values()).sort((o,s)=>s.dateKey>o.dateKey?1:s.dateKey<o.dateKey?-1:0)});function D(r){return{toilet:"如厕",meal:"饭否",fitness:"健身",other:"其他"}[r]||"其他"}return(r,e)=>{const o=E,s=S,b=$,R=I;return l(),n("div",J,[a("header",O,[a("div",Q,[a("div",null,[e[2]||(e[2]=a("h1",{class:"record-title"},"小本本",-1)),f.value.length?(l(),n("p",W,"共 "+u(f.value.length)+" 条",1)):N("",!0)]),c(o,{plain:"",round:"",class:"record-header-more","aria-label":"更多操作",onClick:_(g)},{default:p(()=>[...e[3]||(e[3]=[a("span",{class:"record-header-more-icon"},"⋯",-1)])]),_:1},8,["onClick"])])]),a("section",X,[a("div",Y,[e[4]||(e[4]=a("span",{class:"record-filter-label"},"时间",-1)),c(b,{active:v.value,"onUpdate:active":e[0]||(e[0]=t=>v.value=t),shrink:"",class:"record-tabs record-tabs-time"},{default:p(()=>[(l(),n(m,null,y(V,t=>c(s,{key:t.value,name:t.value,title:t.label},null,8,["name","title"])),64))]),_:1},8,["active"])]),a("div",Z,[e[5]||(e[5]=a("span",{class:"record-filter-label"},"类型",-1)),c(b,{active:d.value,"onUpdate:active":e[1]||(e[1]=t=>d.value=t),shrink:"",class:"record-tabs record-tabs-type"},{default:p(()=>[c(s,{name:"all",title:"全部"}),(l(),n(m,null,y(K,t=>c(s,{key:"ht-"+t.type,name:t.type,title:t.label},null,8,["name","title"])),64))]),_:1},8,["active"])])]),a("main",ee,[h.value.length?(l(!0),n(m,{key:0},y(h.value,t=>(l(),n("section",{key:t.dateKey,class:"record-date-section"},[a("h2",te,u(_(F)(t.dateKey)),1),a("div",ae,[(l(!0),n(m,null,y(t.recs,i=>(l(),n("div",{key:i.id,class:z(["record-card","record-card--"+(i.type||"other")])},[a("span",se,u(D(i.type||"other")),1),a("span",oe,u(_(L)(i.timestamp)),1),c(o,{size:"mini",plain:"",class:"record-card-delete",onClick:U(ne=>x(i.id),["stop"])},{default:p(()=>[...e[6]||(e[6]=[P(" 删除 ",-1)])]),_:1},8,["onClick"])],2))),128))])]))),128)):(l(),j(R,{key:1,description:"小本本还是空的哦",image:"default",class:"record-empty"}))])])}}},me=H(re,[["__scopeId","data-v-d05f65c0"]]);export{me as default};
