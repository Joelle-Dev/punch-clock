import{_ as L,G as F,o as l,j as n,a as t,t as p,k as M,d as c,w as d,m as f,F as m,l as _,c as k,h as w,H as N,B as P,r as g,ac as j,n as G,ab as U,an as q,al as z,am as H}from"./index-X1Z84OWo.js";import{E as I,S as Y}from"./index-PU5M7Uio.js";/* empty css              */import{a as J,T as O}from"./index-BJMF_AxL.js";import"./use-id-BRxWW_Vv.js";const Q={class:"tab-panel active record-page"},W={class:"record-header"},X={class:"record-header-inner"},Z={key:0,class:"record-summary"},$={class:"record-filters"},ee={class:"record-filter-row"},te={class:"record-filter-row"},ae={class:"record-list-wrap"},se={class:"record-date-title"},re={class:"record-date-cards"},oe={class:"record-card-type"},le={class:"record-card-time"},ne={__name:"RecordView",setup(ce){const B=N("openActionsMenu",()=>{}),{records:C,deleteRecord:T,applyFilter:K}=F();function x({position:o,name:e}){if(o!=="right")return!0;const s=z();return H({title:"删掉这条？",message:"真要删掉这条呀？",showCancelButton:!0,confirmButtonText:"好哒",cancelButtonText:"算了",...s?{confirmButtonColor:s}:{}}).then(()=>(T(e),!0)).catch(()=>!0)}const y=g("all"),u=g("all"),E=[{type:"toilet",label:"如厕"},{type:"meal",label:"饭否"},{type:"fitness",label:"健身"}],R=[{value:"all",label:"全部"},{value:"today",label:"今天"},{value:"week",label:"本周"},{value:"month",label:"本月"}],v=w(()=>{const o=K(C.value,y.value);return u.value==="all"?o:o.filter(e=>(e.type||"other")===u.value)}),b=w(()=>{const o=v.value.slice().sort((s,r)=>r.timestamp-s.timestamp),e=new Map;for(const s of o){const r=s.dateKey||"";e.has(r)||e.set(r,{dateKey:r,recs:[]}),e.get(r).recs.push(s)}return Array.from(e.values()).sort((s,r)=>r.dateKey>s.dateKey?1:r.dateKey<s.dateKey?-1:0)});function S(o){return q[o]||"其他"}return(o,e)=>{const s=P,r=J,h=O,V=Y,A=I;return l(),n("div",Q,[t("header",W,[t("div",X,[t("div",null,[e[2]||(e[2]=t("h1",{class:"record-title"},"小本本",-1)),v.value.length?(l(),n("p",Z,"共 "+p(v.value.length)+" 条",1)):M("",!0)]),c(s,{plain:"",round:"",class:"record-header-more","aria-label":"更多操作",onClick:f(B)},{default:d(()=>[...e[3]||(e[3]=[t("span",{class:"record-header-more-icon"},"⋯",-1)])]),_:1},8,["onClick"])])]),t("section",$,[t("div",ee,[e[4]||(e[4]=t("span",{class:"record-filter-label"},"时间",-1)),c(h,{active:y.value,"onUpdate:active":e[0]||(e[0]=a=>y.value=a),shrink:"",class:"record-tabs record-tabs-time"},{default:d(()=>[(l(),n(m,null,_(R,a=>c(r,{key:a.value,name:a.value,title:a.label},null,8,["name","title"])),64))]),_:1},8,["active"])]),t("div",te,[e[5]||(e[5]=t("span",{class:"record-filter-label"},"类型",-1)),c(h,{active:u.value,"onUpdate:active":e[1]||(e[1]=a=>u.value=a),shrink:"",class:"record-tabs record-tabs-type"},{default:d(()=>[c(r,{name:"all",title:"全部"}),(l(),n(m,null,_(E,a=>c(r,{key:"ht-"+a.type,name:a.type,title:a.label},null,8,["name","title"])),64))]),_:1},8,["active"])])]),t("main",ae,[b.value.length?(l(!0),n(m,{key:0},_(b.value,a=>(l(),n("section",{key:a.dateKey,class:"record-date-section"},[t("h2",se,p(f(j)(a.dateKey)),1),t("div",re,[(l(!0),n(m,null,_(a.recs,i=>(l(),k(V,{key:i.id,name:i.id,"before-close":D=>x(D,i.id),class:"record-swipe-cell"},{right:d(()=>[c(s,{square:"",type:"danger",text:"删除",class:"record-swipe-delete"})]),default:d(()=>[t("div",{class:G(["record-card","record-card--"+(i.type||"other")])},[t("span",oe,p(S(i.type||"other")),1),t("span",le,p(f(U)(i.timestamp)),1)],2)]),_:2},1032,["name","before-close"]))),128))])]))),128)):(l(),k(A,{key:1,image:"default",class:"record-empty"},{description:d(()=>[...e[6]||(e[6]=[t("p",{class:"record-empty-desc"},"小本本还是空的哦",-1),t("p",{class:"record-empty-warm"},"打一次就会亮起来～",-1)])]),_:1}))])])}}},_e=L(ne,[["__scopeId","data-v-4535f2aa"]]);export{_e as default};
