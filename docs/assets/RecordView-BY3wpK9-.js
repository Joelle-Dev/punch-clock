import{E as A,o as l,j as n,a as t,t as p,k as F,d as c,w as d,u as f,F as m,l as _,c as k,h as w,G as M,B as N,r as g,ak as G,n as L,aj as P,ax as U,ay as q}from"./index-BraOb1rX.js";import{S as z,E as I}from"./index-C7OV23ls.js";/* empty css              */import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as J,T as O}from"./index-2lVRMbtx.js";import"./use-id-DvUx4d6e.js";const Q={class:"tab-panel active record-page"},W={class:"record-header"},X={class:"record-header-inner"},Y={key:0,class:"record-summary"},Z={class:"record-filters"},$={class:"record-filter-row"},ee={class:"record-filter-row"},te={class:"record-list-wrap"},ae={class:"record-date-title"},se={class:"record-date-cards"},re={class:"record-card-type"},oe={class:"record-card-time"},le={__name:"RecordView",setup(ne){const C=M("openActionsMenu",()=>{}),{records:B,deleteRecord:T,applyFilter:x}=A();function K({position:o,name:e}){if(o!=="right")return!0;const s=U();return q({title:"删掉这条？",message:"真要删掉这条呀？",showCancelButton:!0,confirmButtonText:"好哒",cancelButtonText:"算了",...s?{confirmButtonColor:s}:{}}).then(()=>(T(e),!0)).catch(()=>!0)}const y=g("all"),u=g("all"),R=[{type:"toilet",label:"如厕"},{type:"meal",label:"饭否"},{type:"fitness",label:"健身"},{type:"other",label:"其他"}],V=[{value:"all",label:"全部"},{value:"today",label:"今天"},{value:"week",label:"本周"},{value:"month",label:"本月"}],v=w(()=>{const o=x(B.value,y.value);return u.value==="all"?o:o.filter(e=>(e.type||"other")===u.value)}),h=w(()=>{const o=v.value.slice().sort((s,r)=>r.timestamp-s.timestamp),e=new Map;for(const s of o){const r=s.dateKey||"";e.has(r)||e.set(r,{dateKey:r,recs:[]}),e.get(r).recs.push(s)}return Array.from(e.values()).sort((s,r)=>r.dateKey>s.dateKey?1:r.dateKey<s.dateKey?-1:0)});function D(o){return{toilet:"如厕",meal:"饭否",fitness:"健身",other:"其他"}[o]||"其他"}return(o,e)=>{const s=N,r=J,b=O,E=z,S=I;return l(),n("div",Q,[t("header",W,[t("div",X,[t("div",null,[e[2]||(e[2]=t("h1",{class:"record-title"},"小本本",-1)),v.value.length?(l(),n("p",Y,"共 "+p(v.value.length)+" 条",1)):F("",!0)]),c(s,{plain:"",round:"",class:"record-header-more","aria-label":"更多操作",onClick:f(C)},{default:d(()=>[...e[3]||(e[3]=[t("span",{class:"record-header-more-icon"},"⋯",-1)])]),_:1},8,["onClick"])])]),t("section",Z,[t("div",$,[e[4]||(e[4]=t("span",{class:"record-filter-label"},"时间",-1)),c(b,{active:y.value,"onUpdate:active":e[0]||(e[0]=a=>y.value=a),shrink:"",class:"record-tabs record-tabs-time"},{default:d(()=>[(l(),n(m,null,_(V,a=>c(r,{key:a.value,name:a.value,title:a.label},null,8,["name","title"])),64))]),_:1},8,["active"])]),t("div",ee,[e[5]||(e[5]=t("span",{class:"record-filter-label"},"类型",-1)),c(b,{active:u.value,"onUpdate:active":e[1]||(e[1]=a=>u.value=a),shrink:"",class:"record-tabs record-tabs-type"},{default:d(()=>[c(r,{name:"all",title:"全部"}),(l(),n(m,null,_(R,a=>c(r,{key:"ht-"+a.type,name:a.type,title:a.label},null,8,["name","title"])),64))]),_:1},8,["active"])])]),t("main",te,[h.value.length?(l(!0),n(m,{key:0},_(h.value,a=>(l(),n("section",{key:a.dateKey,class:"record-date-section"},[t("h2",ae,p(f(G)(a.dateKey)),1),t("div",se,[(l(!0),n(m,null,_(a.recs,i=>(l(),k(E,{key:i.id,name:i.id,"before-close":j=>K(j,i.id),class:"record-swipe-cell"},{right:d(()=>[c(s,{square:"",type:"danger",text:"删除",class:"record-swipe-delete"})]),default:d(()=>[t("div",{class:L(["record-card","record-card--"+(i.type||"other")])},[t("span",re,p(D(i.type||"other")),1),t("span",oe,p(f(P)(i.timestamp)),1)],2)]),_:2},1032,["name","before-close"]))),128))])]))),128)):(l(),k(S,{key:1,description:"小本本还是空的哦",image:"default",class:"record-empty"}))])])}}},_e=H(le,[["__scopeId","data-v-bc17a9eb"]]);export{_e as default};
