import{i as b,Z as B,ap as S,o as i,c as m,d as g,w as x,b as E,a as u,aq as f,n as p,j as I,t as M,k,ar as T,ac as L,as as N,at as V,au as Y,r as D,h as d}from"./index-BraOb1rX.js";const R=["aria-modal","aria-labelledby"],$=["id"],q={__name:"BaseModal",props:{open:{type:Boolean,default:!1},title:{type:String,default:""},showClose:{type:Boolean,default:void 0},innerClass:{type:String,default:""},lockScroll:{type:Boolean,default:!0}},emits:["update:open","close"],setup(a,{emit:y}){const o=a,r=y,h=D(null),w=d(()=>o.title?"modal-title-"+Math.random().toString(36).slice(2,9):void 0),v=d(()=>o.showClose!==void 0?o.showClose:!!o.title),C=d(()=>o.title?"theme-modal-inner"+(o.innerClass?" "+o.innerClass:""):o.innerClass||"");function n(){r("update:open",!1),r("close")}function s(t){t.key==="Escape"&&o.open&&n()}function c(t){if(!o.lockScroll)return;const e=document.body.style;if(t){const l=window.scrollY;e.overflow="hidden",e.position="fixed",e.top=`-${l}px`,e.left="0",e.right="0"}else{const l=Math.abs(parseInt(e.top||"0",10));e.overflow="",e.position="",e.top="",e.left="",e.right="",window.scrollTo(0,l)}}return b(()=>o.open,t=>{c(t),t?B(()=>document.addEventListener("keydown",s)):document.removeEventListener("keydown",s)},{immediate:!0}),S(()=>{document.removeEventListener("keydown",s),c(!1)}),(t,e)=>{const l=L;return i(),m(Y,{to:"body"},[g(V,{name:"modal-fade"},{default:x(()=>[E(u("div",{ref_key:"backdropRef",ref:h,class:p(["modal-backdrop",{"theme-modal":!!a.title}]),role:"dialog","aria-modal":a.open,"aria-labelledby":(a.title,void 0),onClick:f(n,["self"])},[u("div",{class:p(["modal",C.value]),role:"document",onClick:e[0]||(e[0]=f(()=>{},["stop"]))},[a.title?(i(),I("div",{key:0,class:"theme-modal-title",id:w.value},M(a.title),9,$)):k("",!0),T(t.$slots,"default"),v.value?(i(),m(l,{key:1,name:"cross",class:"theme-modal-close","aria-label":"关闭",onClick:n})):k("",!0)],2)],10,R),[[N,a.open]])]),_:3})])}}};export{q as _};
