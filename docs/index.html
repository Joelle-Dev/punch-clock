<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="è½»é‡çº§æ‰“å¡è®°å½•åº”ç”¨">
    <meta name="theme-color" content="#FFFFFF">
    <!-- é¦–å±ç™½åº•ï¼Œå‡å°‘é»‘å± -->
    <style>html,body{background:#fff !important;}</style>
    <!-- iOS Safari PWA ä¼˜åŒ–ï¼šæ­£æ–¹å½¢å›¾æ ‡ -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ç§‹ç‘¾æ‰“å¡">
    <title>æ‰“å¡è®°å½•</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“…</text></svg>">
    <!-- ä¸»å±å¹•æ­£æ–¹å½¢å›¾æ ‡ï¼ˆSVG 512Ã—512ï¼‰ -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><rect width='512' height='512' fill='%234F46E5'/><text x='256' y='280' text-anchor='middle' font-size='200' fill='white'>ğŸ“…</text></svg>">
    <link rel="stylesheet" href="./style.css">
    <link rel="manifest" href="./manifest.webmanifest">
    <style>
        .splash-screen {
            position: fixed;
            inset: 0;
            background: #ffffff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 999;
            transition: opacity 0.35s ease;
        }
        .splash-screen.splash-hidden {
            opacity: 0;
            pointer-events: none;
        }
        .splash-title {
            font-size: 20px;
            color: #4F46E5;
            margin-bottom: 8px;
            font-weight: 600;
        }
        .splash-subtitle {
            font-size: 14px;
            color: #6B7280;
        }
    </style>
</head>
<body>
    
    <div id="splash" class="splash-screen">
        <div class="splash-title">æ½˜ç§‹ç‘¾</div>
        <div class="splash-subtitle">ä»Šå¤©ä¹Ÿè¦å¥½å¥½ç”Ÿæ´»</div>
    </div>

    <div class="container">
        <header>
            <h1>ğŸ“… æ‰“å¡è®°å½•</h1>
            <p class="subtitle"><span class="highlight-name">æ½˜ç§‹ç‘¾</span> çš„ä¸“å±æ‰“å¡å°æœ¬æœ¬</p>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-label">ä»Šæ—¥æ‰“å¡</span>
                    <span class="stat-value" id="todayCount">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">è¿ç»­æ‰“å¡</span>
                    <span class="stat-value" id="streakCount">0</span>
                </div>
            </div>
        </header>

        <main>
            <div class="type-section">
                <div class="type-tabs">
                    <button class="type-tab active" data-type="toilet">å¦‚å•</button>
                    <button class="type-tab" data-type="meal">é¥­å¦</button>
                    <button class="type-tab" data-type="fitness">å¥èº«</button>
                    <button class="type-tab" data-type="other">å…¶ä»–</button>
                </div>
            </div>

            <div class="punch-section">
                <div class="praise-wrap" id="praiseWrap" aria-live="polite">
                    <span class="praise-text" id="praiseText"></span>
                    <span class="praise-hearts" id="praiseHearts"></span>
                </div>
                <button id="punchBtn" class="punch-button">
                    <span class="punch-icon">ğŸ‘Š</span>
                    <span class="punch-text">æ‰“å¡</span>
                </button>
                <p class="last-punch" id="lastPunchTime">æš‚æ— æ‰“å¡è®°å½•</p>
            </div>

            <div class="history-section">
                <h2>æ‰“å¡æ¦‚è§ˆä¸å†å²</h2>
                <div class="filter-tabs">
                    <button class="filter-tab active" data-filter="all">å…¨éƒ¨</button>
                    <button class="filter-tab" data-filter="today">ä»Šå¤©</button>
                    <button class="filter-tab" data-filter="week">æœ¬å‘¨</button>
                    <button class="filter-tab" data-filter="month">æœ¬æœˆ</button>
                </div>
                <div class="history-type-tabs">
                    <button class="history-type-tab active" data-history-type="all">å…¨éƒ¨ç±»å‹</button>
                    <button class="history-type-tab" data-history-type="toilet">å¦‚å•</button>
                    <button class="history-type-tab" data-history-type="meal">é¥­å¦</button>
                    <button class="history-type-tab" data-history-type="fitness">å¥èº«</button>
                    <button class="history-type-tab" data-history-type="other">å…¶ä»–</button>
                </div>
                <div class="history-list" id="historyList">
                    <!-- æ‰“å¡è®°å½•å°†åŠ¨æ€æ’å…¥è¿™é‡Œ -->
                </div>
            </div>
        </main>

        <div class="actions-fab" id="actionsFab">
            <div class="actions-menu" id="actionsMenu">
                <button id="exportBtn" class="action-btn">å¯¼å‡ºæ•°æ®</button>
                <button id="clearBtn" class="action-btn danger">æ¸…ç©ºè®°å½•</button>
            </div>
            <button type="button" class="actions-fab-toggle" id="actionsFabToggle" aria-label="æ›´å¤šæ“ä½œ">
                <span class="fab-icon">â‹¯</span>
            </button>
        </div>
    </div>

    <div id="confirmModal" class="modal-backdrop" hidden>
        <div class="modal">
            <div class="modal-title" id="modalTitle">ç¡®è®¤åˆ é™¤</div>
            <div class="modal-message" id="modalMessage"></div>
            <div class="modal-actions">
                <button id="modalCancel" class="modal-btn">å–æ¶ˆ</button>
                <button id="modalConfirm" class="modal-btn danger">åˆ é™¤</button>
            </div>
        </div>
    </div>

    <script type="module" src="./app.js"></script>
    <script>
        // å¯åŠ¨é¡µï¼šç­‰é¦–å¸§ç™½åº•æ¸²æŸ“åå†æ·¡å‡ºï¼Œå‡å°‘é»‘â†’ç™½é—ªçƒ
        (function () {
            var splash = document.getElementById('splash');
            if (!splash) return;
            var hide = function () {
                splash.classList.add('splash-hidden');
                setTimeout(function () {
                    splash.style.display = 'none';
                }, 400);
            };
            if (document.readyState === 'complete') {
                setTimeout(hide, 500);
            } else {
                window.addEventListener('load', function () { setTimeout(hide, 500); });
            }
        })();
    </script>
</body>
</html>

